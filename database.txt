create table CHEMO_USER (
   ID integer not null GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1)
  ,ENTITY_NAME varchar(60) 
  ,PERSON_NAME varchar(60) NOT NULL
  ,PERSON_POSITION varchar(60)
  ,EMAIL varchar(60) UNIQUE NOT NULL
  ,PHONE_NUMBER varchar(80)
  ,ADDRESS varchar(1000)
  ,CITY varchar(60)
  ,COUNTRY varchar(60)
  ,PASSWORD varchar(200) NOT NULL
  ,TYPE VARCHAR(30)
  ,APPROVE VARCHAR(1)
  ,ACTIVE VARCHAR(1)
  ,FIRST_LOGIN VARCHAR(1)
  ,CREATED_AT TIMESTAMP NOT NULL with default current timestamp
  ,UPDATED_AT timestamp not null with default current timestamp
  ,PRIMARY KEY (ID)
);

create table CHEMO_USER_PHARMACY (
  PHARMACY_ID INTEGER NOT NULL
  ,OPEN_FROM TIME
  ,OPEN_TO TIME
  ,STOCK_UPDATE TIMESTAMP NOT NULL with default current timestamp
  ,CREATED_AT TIMESTAMP NOT NULL with default current timestamp
  ,UPDATED_AT timestamp not null with default current timestamp
  ,PRIMARY KEY (PHARMACY_ID)
);

create table ADMIN (
  ID integer not null GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1)
  ,USERNAME varchar(60) 
  ,EMAIL varchar(60) UNIQUE NOT NULL
  ,PASSWORD varchar(200) NOT NULL
  ,TYPE integer
  ,ACTIVE integer
  ,CREATED_AT TIMESTAMP NOT NULL with default current timestamp
  ,UPDATED_AT timestamp not null with default current timestamp
  ,PRIMARY KEY (ID)
);

create table CHEMO_MEDICINE (
   ID integer not null GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1)
  ,GENERIC_NAME varchar(60) NOT NULL
  ,BRAND_NAME varchar(60) NOT NULL
  ,FORM varchar(60) NOT NULL
  ,STRENGTH DOUBLE NOT NULL
  ,STRENGTH_UNIT varchar(20) NOT NULL
  ,ROUTE varchar(200)
  ,MANUFACTURER varchar(60) NOT NULL
  ,SPECIFICATION_FORM varchar(60)
  ,PACK_TYPE VARCHAR(60)
  ,UNITS_PER_PACK INTEGER
  ,SRA varchar(100)
  ,APPROVED BOOLEAN DEFAULT FALSE
  ,APPROVAL_DATE VARCHAR(60)
  ,SOURCE varchar(2000)
  ,EXTRACT_DATE VARCHAR(60)
  ,STATUS varchar(60)
  ,COMMENTS varchar(2000)
  ,CREATED_AT TIMESTAMP NOT NULL with default current timestamp
  ,UPDATED_AT timestamp not null with default current timestamp
  ,PRIMARY KEY (ID)
);

create table CHEMO_STOCK_LIST (
   ID integer not null GENERATED ALWAYS AS IDENTITY (START WITH 1 INCREMENT BY 1)
  ,MEDICINE_ID INT NOT NULL
  ,BATCH_NUMBER varchar(100)
  ,EXPIRY_DATE VARCHAR(60)
  ,PACK_SIZE INTEGER
  ,PRICE_PER_PACK DOUBLE
  ,AVAILABLE_STOCK INT
  ,AVG_MONTHLY_CONSUMPTION VARCHAR(60)
  ,PHARMACY_ID INT
  ,CREATED_AT TIMESTAMP NOT NULL with default current timestamp
  ,UPDATED_AT timestamp not null with default current timestamp
  ,PRIMARY KEY (ID)
);

CREATE TABLE CHEMO_STOCK_LIST_TRANSACTION_HISTORY (
  ID INTEGER NOT NULL, 
  TRANSACTION_TIME TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP, 
  TRANSACTION_TYPE VARCHAR(60 OCTETS) NOT NULL, 
  NEW_AVAILABLE_STOCK INTEGER, 
  MEDICINE_ID INTEGER NOT NULL, 
  BATCH_NUMBER VARCHAR(100 OCTETS), 
  EXPIRY_DATE VARCHAR(60 OCTETS), 
  PACK_SIZE INTEGER, 
  PRICE_PER_PACK DOUBLE, 
  AVAILABLE_STOCK INTEGER, 
  AVG_MONTHLY_CONSUMPTION VARCHAR(60 OCTETS), 
  PHARMACY_ID INTEGER, 
  CREATED_AT TIMESTAMP NOT NULL, 
  UPDATED_AT TIMESTAMP NOT NULL, 
  PRIMARY KEY
  (ID, 
    TRANSACTION_TIME, 
    TRANSACTION_TYPE)
);

create table ADMIN_FORGOT_PASSWORD (
   ADMIN_ID INT NOT NULL
  ,TOKEN VARCHAR(300) NOT NULL
  ,CREATED_AT TIMESTAMP NOT NULL with default current timestamp
);

create table USER_FORGOT_PASSWORD (
   USER_ID INT NOT NULL
  ,TOKEN VARCHAR(300) NOT NULL
  ,CREATED_AT TIMESTAMP NOT NULL with default current timestamp
);

create table USER_SUSPENSION (
   USER_ID INT NOT NULL
  ,SUSPENSION_REASON VARCHAR(1000)
  ,TYPE SMALLINT(2) NOT NULL
  ,CREATED_AT TIMESTAMP NOT NULL with default current timestamp
);

CREATE TABLE SHOPPING_OPERATION (
  OPERATION_ID VARCHAR(60 OCTETS), 
  SUB_OPERATION_ID VARCHAR(60 OCTETS), 
  MEDICINE_ID VARCHAR(60 OCTETS), 
  TREATMENT_CENTR_ID VARCHAR(60 OCTETS), 
  OPERATION_TIME TIMESTAMP NOT NULL DEFAULT CURRENT TIMESTAMP, 
  DOCTOR_ID VARCHAR(60 OCTETS), 
  PATIENT_ID VARCHAR(60 OCTETS), 
  MEDICINE_QUANTITY VARCHAR(60 OCTETS), 
  MEDICINE_GENERIC_NAME VARCHAR(60 OCTETS), 
  MEDICINE_BRAND_NAME VARCHAR(60 OCTETS), 
  MEDICINE_FORM VARCHAR(60 OCTETS), 
  MEDICINE_STRENGTH VARCHAR(60 OCTETS), 
  MEDICINE_STRENGTH_UNIT VARCHAR(20 OCTETS), 
  MEDICINE_MANUFACTURER VARCHAR(60 OCTETS)
);

CREATE TABLE SHOPPING_OPERATION_PHARMECY (
  OPERATION_ID VARCHAR(60 OCTETS), 
  SUB_OPERATION_ID VARCHAR(60 OCTETS), 
  MEDICINE_ID VARCHAR(60 OCTETS), 
  PHARMACY_ID VARCHAR(60 OCTETS), 
  ENTITY_NAME VARCHAR(60 OCTETS), 
  PHONE_NUMBER VARCHAR(25 OCTETS), 
  EMAIL VARCHAR(60 OCTETS), 
  ADDRESS VARCHAR(1000 OCTETS), 
  CITY VARCHAR(60 OCTETS), 
  COUNTRY VARCHAR(60 OCTETS), 
  OPEN_FROM TIME, 
  OPEN_TO TIME, 
  EXPIRY_DATE VARCHAR(60 OCTETS), 
  PACK_SIZE INTEGER, 
  PRICE_PER_PACK DOUBLE
);

TRUNCATE TABLE DEV.CHEMO_MEDICINE IMMEDIATE;